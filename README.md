# Лабораторная работа #4
В рамках данной лабораторной работы необходимо написать кроссплатформенную программу, которая прослушивает по `COM`-порту температуру окружающей среды и логирует её.

В первый лог-файл `measurements.log` показания пишутся раз в минуту и хранятся не более суток.

Во второй лог-файл `hourly_average.log` пишется среднее значение за час и лог хранится не более месяца.

В третий лог файл `daily_average.log` пишется среднее значение за день и лог хранится не более года.

## Описание
Для работы с `COM`-портами была написана кроссплатформенная библиотека [com.c](com.c).

Для эмуляции устройства которое пишет температуру в `COM`-порт был написан эмулятор [emulator.c](emulator.c).
Данный эмулятор раз в секунду передаёт случайную температуру в границах $[20.0;30.0]$.

Само приложение находится в [main.c](main.c).

Для корректной работы необходимо настроить виртуальный драйвер для `COM`-порта.

Для unix:
>  socat -d -d pty,raw,echo=0 pty,raw,echo=0

Для windows необходимо установить и настроить [com0com](https://com0com.sourceforge.net/)

## Запуск

Для начала нужно скомпилировать эмулятор:

windows:
> gcc emulator.c -o emulator.exe

unix:
> gcc emulator.c -o emulator.out

Далее его нужно запустить:

windows:
> ./emulator.exe

unix:
> ./emulator.out

Далее, в отдельном окне терминала необходимо аналогично скомпилировать и запустить программу `main.c`
